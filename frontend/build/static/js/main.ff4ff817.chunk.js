(this["webpackJsonpreact-redux-jwt"]=this["webpackJsonpreact-redux-jwt"]||[]).push([[0],{201:function(e,t,a){},202:function(e,t,a){},203:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(26),l=a.n(r),o=a(13),c=a(20),i=a(69),m=a(70),d=a(6);const u=JSON.parse(localStorage.getItem("user")),h=u?{isLoggedIn:!0,user:u}:{isLoggedIn:!1,user:null};const g={};var p=Object(c.combineReducers)({auth:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;const{type:a,payload:n}=t;switch(a){case"REGISTER_SUCCESS":case"REGISTER_FAIL":return Object(d.a)(Object(d.a)({},e),{},{isLoggedIn:!1});case"LOGIN_SUCCESS":return Object(d.a)(Object(d.a)({},e),{},{isLoggedIn:!0,user:n.user});case"LOGIN_FAIL":case"LOGOUT":return Object(d.a)(Object(d.a)({},e),{},{isLoggedIn:!1,user:null});default:return e}},message:function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;const{type:a,payload:n}=t;switch(a){case"SET_MESSAGE":return{message:n};case"CLEAR_MESSAGE":return{message:""};default:return e}}});const E=[m.a];var b=Object(c.createStore)(p,Object(i.composeWithDevTools)(Object(c.applyMiddleware)(...E))),v=(a(82),a(11)),f=a(4),S=(a(83),a(84),a(27)),w=a.n(S),y=a(18),N=a.n(y),x=a(28),C=a.n(x),k=a(14),L=a.n(k);const O="http://192.168.22.56:8080/api/auth/";var j=new class{login(e,t){return L.a.post(O+"signin",{username:e,password:t}).then(e=>(e.data.accessToken&&localStorage.setItem("user",JSON.stringify(e.data)),e.data))}logout(){localStorage.removeItem("user")}register(e,t,a){return L.a.post(O+"signup",{username:e,email:t,password:a})}};const T=e=>{if(!e)return s.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This field is required!")};class I extends n.Component{constructor(e){super(e),this.handleLogin=this.handleLogin.bind(this),this.onChangeUsername=this.onChangeUsername.bind(this),this.onChangePassword=this.onChangePassword.bind(this),this.state={username:"",password:"",loading:!1}}onChangeUsername(e){this.setState({username:e.target.value})}onChangePassword(e){this.setState({password:e.target.value})}handleLogin(e){e.preventDefault(),this.setState({loading:!0}),this.form.validateAll();const{dispatch:t,history:a}=this.props;var n,s;0===this.checkBtn.context._errors.length?t((n=this.state.username,s=this.state.password,e=>j.login(n,s).then(t=>(e({type:"LOGIN_SUCCESS",payload:{user:t}}),Promise.resolve()),t=>{const a=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();return e({type:"LOGIN_FAIL"}),e({type:"SET_MESSAGE",payload:a}),Promise.reject()}))).then(()=>{a.push("/profile"),window.location.reload()}).catch(()=>{this.setState({loading:!1})}):this.setState({loading:!1})}render(){const{isLoggedIn:e,message:t}=this.props;return e?s.a.createElement(f.a,{to:"/profile"}):s.a.createElement("div",{className:"col-md-12"},s.a.createElement("div",{className:"card bg-light text-dark"},s.a.createElement("h1",null,s.a.createElement("center",null,"Login")),s.a.createElement(w.a,{onSubmit:this.handleLogin,ref:e=>{this.form=e}},s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"username"},"Username"),s.a.createElement(N.a,{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:this.onChangeUsername,validations:[T]})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"password"},"Password"),s.a.createElement(N.a,{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.onChangePassword,validations:[T]})),s.a.createElement("div",{className:"form-group"},s.a.createElement("button",{className:"btn btn-dark btn-block",disabled:this.state.loading},this.state.loading&&s.a.createElement("span",{className:"spinner-border spinner-border-sm"}),s.a.createElement("span",null,"Login"))),t&&s.a.createElement("div",{className:"form-group"},s.a.createElement("div",{className:"alert alert-danger",role:"alert"},t)),s.a.createElement(C.a,{style:{display:"none"},ref:e=>{this.checkBtn=e}}))))}}var D=Object(o.b)((function(e){const{isLoggedIn:t}=e.auth,{message:a}=e.message;return{isLoggedIn:t,message:a}}))(I),U=a(71);const G=e=>{if(!e)return s.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This field is required!")},R=e=>{if(!Object(U.isEmail)(e))return s.a.createElement("div",{className:"alert alert-danger",role:"alert"},"This is not a valid email.")},P=e=>{if(e.length<3||e.length>20)return s.a.createElement("div",{className:"alert alert-danger",role:"alert"},"The username must be between 3 and 20 characters.")},A=e=>{if(e.length<6||e.length>40)return s.a.createElement("div",{className:"alert alert-danger",role:"alert"},"The password must be between 6 and 40 characters.")};class F extends n.Component{constructor(e){super(e),this.handleRegister=this.handleRegister.bind(this),this.onChangeUsername=this.onChangeUsername.bind(this),this.onChangeEmail=this.onChangeEmail.bind(this),this.onChangePassword=this.onChangePassword.bind(this),this.state={username:"",email:"",password:"",successful:!1}}onChangeUsername(e){this.setState({username:e.target.value})}onChangeEmail(e){this.setState({email:e.target.value})}onChangePassword(e){this.setState({password:e.target.value})}handleRegister(e){var t,a,n;e.preventDefault(),this.setState({successful:!1}),this.form.validateAll(),0===this.checkBtn.context._errors.length&&this.props.dispatch((t=this.state.username,a=this.state.email,n=this.state.password,e=>j.register(t,a,n).then(t=>(e({type:"REGISTER_SUCCESS"}),e({type:"SET_MESSAGE",payload:t.data.message}),Promise.resolve()),t=>{const a=t.response&&t.response.data&&t.response.data.message||t.message||t.toString();return e({type:"REGISTER_FAIL"}),e({type:"SET_MESSAGE",payload:a}),Promise.reject()}))).then(()=>{this.setState({successful:!0})}).catch(()=>{this.setState({successful:!1})})}render(){const{message:e}=this.props;return s.a.createElement("div",{className:"col-md-12"},s.a.createElement("div",{className:"card bg-light text-dark"},s.a.createElement("h1",null,s.a.createElement("center",null,"User Registration ")),s.a.createElement(w.a,{onSubmit:this.handleRegister,ref:e=>{this.form=e}},!this.state.successful&&s.a.createElement("div",null,s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"username"},"Username"),s.a.createElement(N.a,{type:"text",className:"form-control",name:"username",value:this.state.username,onChange:this.onChangeUsername,validations:[G,P]})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"email"},"Email"),s.a.createElement(N.a,{type:"text",className:"form-control",name:"email",value:this.state.email,onChange:this.onChangeEmail,validations:[G,R]})),s.a.createElement("div",{className:"form-group"},s.a.createElement("label",{htmlFor:"password"},"Password"),s.a.createElement(N.a,{type:"password",className:"form-control",name:"password",value:this.state.password,onChange:this.onChangePassword,validations:[G,A]})),s.a.createElement("div",{className:"form-group"},s.a.createElement("button",{className:"btn btn-dark btn-block"},"Sign Up"))),e&&s.a.createElement("div",{className:"form-group"},s.a.createElement("div",{className:this.state.successful?"alert alert-success":"alert alert-danger",role:"alert"},e)),s.a.createElement(C.a,{style:{display:"none"},ref:e=>{this.checkBtn=e}}))))}}var W=Object(o.b)((function(e){const{message:t}=e.message;return{message:t}}))(F);class M extends n.Component{render(){const{user:e}=this.props;return e?s.a.createElement("div",{class:"card bg-light text-dark"},s.a.createElement("h1",null,e.username),s.a.createElement("p",null,s.a.createElement("strong",null,"Id:")," ",e.id),s.a.createElement("p",null,s.a.createElement("strong",null,"Email:")," ",e.email),s.a.createElement("a",{href:"#"},s.a.createElement("i",{class:"fa fa-dribbble"})),s.a.createElement("a",{href:"#"},s.a.createElement("i",{class:"fa fa-twitter"})),s.a.createElement("a",{href:"#"},s.a.createElement("i",{class:"fa fa-linkedin"})),s.a.createElement("a",{href:"#"},s.a.createElement("i",{class:"fa fa-facebook"}))):s.a.createElement(f.a,{to:"/login"})}}var _=Object(o.b)((function(e){const{user:t}=e.auth;return{user:t}}))(M);function q(){const e=JSON.parse(localStorage.getItem("user"));return e&&e.accessToken?{Authorization:"Bearer "+e.accessToken}:{}}var B=new class{getPublicContent(){return L.a.get("http://192.168.22.56:8080/api/test/all")}getGreetings(){return L.a.get("http://192.168.22.56:8080/api/test/greeting",{headers:q()})}};var z={on(e,t){document.addEventListener(e,e=>t(e.detail))},dispatch(e,t){document.dispatchEvent(new CustomEvent(e,{detail:t}))},remove(e,t){document.removeEventListener(e,t)}};class H extends n.Component{constructor(e){super(e),this.state={content:""}}componentDidMount(){B.getGreetings().then(e=>{this.setState({content:e.data.message})},e=>{this.setState({content:e.response&&e.response.data&&e.response.data.message||e.message||e.toString()}),e.response&&401===e.response.status&&z.dispatch("logout")})}render(){return s.a.createElement("div",{class:"card bg-light text-dark"},s.a.createElement("h3",null,this.state.content),s.a.createElement("a",{href:"#"},s.a.createElement("i",{class:"fa fa-dribbble"})),s.a.createElement("a",{href:"#"},s.a.createElement("i",{class:"fa fa-twitter"})),s.a.createElement("a",{href:"#"},s.a.createElement("i",{class:"fa fa-linkedin"})),s.a.createElement("a",{href:"#"},s.a.createElement("i",{class:"fa fa-facebook"})))}}var J=a(40),V=a(38),$=(a(200),a(31)),K=a.n($);a(201);var Q=new class{getCurrentUser(){const e=JSON.parse(localStorage.getItem("user"));return e?e.username:null}},X=a(5);X.d.register(X.c,X.i,X.k,X.h,X.o,X.p,X.f);var Y=()=>{const[e,t]=Object(n.useState)(null),[a,r]=Object(n.useState)(0),[l,o]=Object(n.useState)(!1),[c,i]=Object(n.useState)(null),[m,d]=Object(n.useState)(""),[u,h]=Object(n.useState)([]),[g,p]=Object(n.useState)([]),[E,b]=Object(n.useState)(null),[v,f]=Object(n.useState)([]),[S,w]=Object(n.useState)(0),[y,N]=Object(n.useState)(null),x=Q.getCurrentUser();Object(n.useEffect)(()=>()=>{c&&(c.close(),console.log("WebSocket d\xe9connect\xe9"))},[c]);const C=()=>{if(0===u.length)return 0;return(u.reduce((e,t)=>e+t,0)/u.length).toFixed(2)},k=()=>{if(l)return void d("Le test de latence est d\xe9j\xe0 en cours.");d(""),o(!0);const e=new WebSocket("ws://192.168.0.167:8080/ws/latency");e.onopen=()=>{console.log("WebSocket de latence connect\xe9"),t("Connexion \xe9tablie. En attente de la latence...")},e.onmessage=e=>{const a=e.data.trim();if(console.log("Message re\xe7u : ",a),a.startsWith("Latence:")){const e=parseFloat(a.split(":")[1].trim());t(e),h(t=>{const a=[...t,e];return a.length>30?a.slice(1):a})}if(a.startsWith("Perte de paquets:")){const e=parseFloat(a.split(":")[1].trim());r(e)}const n=(new Date).toLocaleTimeString();p(e=>{const t=[...e,n];return t.length>30?t.slice(1):t})},e.onclose=()=>{console.log("WebSocket de latence d\xe9connect\xe9"),o(!1)},e.onerror=e=>{console.error("Erreur WebSocket de latence :",e),d("Erreur WebSocket : V\xe9rifiez votre connexion."),o(!1)},N(e)},O=()=>{if(l)return void d("Le test de d\xe9bit est d\xe9j\xe0 en cours.");d(""),o(!0);const e=new WebSocket("ws://192.168.22.56:8080/ws/bandwidth");i(e);let t=0,a=performance.now();e.onopen=()=>{console.log("WebSocket connect\xe9"),t=0,a=performance.now()},e.onmessage=e=>{const n=e.data.length;t+=n;const s=performance.now(),r=8*t/(1024*((s-a)/1e3)*1024);b(r.toFixed(2));const l=(new Date).toLocaleTimeString();f(e=>{const t=[...e,parseFloat(r.toFixed(2))],a=(e=>{if(0===e.length)return 0;return(e.reduce((e,t)=>e+t,0)/e.length).toFixed(2)})(t);return w(a),t.length>30?t.slice(1):t}),p(e=>{const t=[...e,l];return t.length>30?t.slice(1):t})},e.onclose=()=>{console.log("WebSocket d\xe9connect\xe9"),o(!1)},e.onerror=e=>{console.error("Erreur WebSocket :",e),d("Erreur WebSocket : V\xe9rifiez votre connexion."),o(!1)}},j={labels:g,datasets:[{label:"Latence (ms)",data:u,borderColor:"rgba(255, 105, 180, 1)",backgroundColor:"rgba(255, 105, 180, 0.2)",fill:!0,tension:.4,pointRadius:5,pointBackgroundColor:"rgba(255, 105, 180, 1)",borderWidth:3,pointHoverRadius:8}]},T={labels:g,datasets:[{label:"D\xe9bit (Mbps)",data:v,borderColor:"rgba(0, 0, 128, 1)",backgroundColor:"rgba(0, 0, 128, 0.2)",fill:!0,tension:.4,pointRadius:5,pointBackgroundColor:"rgba(0, 0, 128, 1)",borderWidth:2,pointHoverRadius:8}],scales:{x:{title:{display:!0,text:"Temps",color:"#000"},grid:{color:"#e1e1e1"}},y:{title:{display:!0,text:"Valeur",color:"#000"},grid:{color:"#e1e1e1"}}}},I={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0},tooltip:{enabled:!0}},scales:{x:{title:{display:!1,text:"Temps"}},y:{title:{display:!0}}}};return s.a.createElement("div",null,s.a.createElement("h2",null,"Test de Performance R\xe9seau"),s.a.createElement("div",{className:"button-container"},s.a.createElement("button",{className:"start",onClick:()=>{o(!0),k(),O()}},"Go"),s.a.createElement("button",{className:"stop",onClick:()=>{c&&(c.close(),console.log("Tests arr\xeat\xe9s."),o(!1)),y&&(y.close(),console.log("Test de latence arr\xeat\xe9."),o(!1));const e=C();console.log("Latence moyenne :",e),(async e=>{console.log("Nom d'utilisateur actuel :",x);try{const t={latence:parseFloat(e),debit:parseFloat(S),packetlost:a},n={username:x,performanceData:t},s=await L.a.post("http://192.168.22.56:8080/api/network-metrics/save",n);console.log(s.data),alert("Les m\xe9triques ont \xe9t\xe9 sauvegard\xe9es avec succ\xe8s.")}catch(m){console.error("Erreur lors de la sauvegarde des m\xe9triques :",m),alert("Erreur lors de la sauvegarde des m\xe9triques.")}})(e)}},"Stop")),s.a.createElement("p",null,"Latence : ",e),s.a.createElement("p",null,"Latence moyenne : ",C()),s.a.createElement("p",null,"Perte de paquets : ",a,"%"),s.a.createElement("p",null,"D\xe9bit : ",E),s.a.createElement("p",null,"D\xe9bit moyen : ",S),m&&s.a.createElement("p",{style:{color:"red"}},m),s.a.createElement("div",{style:{display:"flex",flexDirection:"column",justifyContent:"flex-start",flexGrow:1}},s.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column",gap:"80px"}},s.a.createElement("div",{id:"latencyGraph",style:{height:"300px",width:"80%"}},s.a.createElement("h3",{style:{color:"#D5006D"}},"Graphique de la Latence"),s.a.createElement(J.a,{data:j,options:I})),s.a.createElement("div",{id:"bandwidthGraph",style:{height:"300px",width:"80%"}},s.a.createElement("h3",{style:{color:"#003366"}},"Graphique du D\xe9bit"),s.a.createElement(J.a,{data:T,options:I})),s.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",marginTop:"auto",paddingBottom:"20px"}},s.a.createElement("button",{onClick:async()=>{const e=new V.default("p","mm","a4");let t=10;const n=(new Date).toLocaleString();e.setFontSize(18),e.text("Rapport de Test R\xe9seau",10,t),t+=15,e.setFontSize(12),e.text("Date du test : ".concat(n),10,t),t+=10;const s=g[0]||"N/A",r=g[g.length-1]||"N/A",l=u.length?Math.max(...u):"N/A",o=u.length?Math.min(...u):"N/A",c=v.length?Math.max(...v):"N/A",i=v.length?Math.min(...v):"N/A";e.text("Dur\xe9e du test : ".concat(s," - ").concat(r),10,t),t+=10,e.text("Latence moyenne : ".concat(C()," ms"),10,t),t+=10,e.text("Latence maximale : ".concat(l," ms"),10,t),t+=10,e.text("Latence minimale : ".concat(o," ms"),10,t),t+=10,e.text("D\xe9bit moyen : ".concat(S," Mbps"),10,t),t+=10,e.text("D\xe9bit maximal : ".concat(c," Mbps"),10,t),t+=10,e.text("D\xe9bit minimal : ".concat(i," Mbps"),10,t),t+=10,e.text("Perte de paquets : ".concat(a,"%"),10,t),t+=15,e.setFontSize(12),e.setTextColor(0,102,204),e.text("D\xe9tails des Tests:",14,t),t+=10,e.setFontSize(12),e.setTextColor(50,50,50),e.text("Latence (ms): ".concat(u.join(", ")),10,t),t+=10,e.text("D\xe9bit (Mbps): ".concat(v.join(", ")),10,t),t+=8;const m=document.getElementById("latencyGraph"),d=document.getElementById("bandwidthGraph");if(m){const a=(await K()(m,{scale:2,width:m.scrollWidth,height:m.scrollHeight})).toDataURL("image/png");e.addImage(a,"PNG",10,t,190,80),t+=85}if(d){e.addPage();const t=(await K()(d,{scale:2,width:d.scrollWidth,height:d.scrollHeight})).toDataURL("image/png");e.addImage(t,"PNG",10,10,190,80)}e.save("rapport-test-reseau.pdf")}},"G\xe9n\xe9rer un rapport")))))};a(202);var Z=()=>{const[e,t]=Object(n.useState)([]),[a,r]=Object(n.useState)(""),l=Object(f.g)(),o=Q.getCurrentUser();return Object(n.useEffect)(()=>{(async()=>{try{const e=await L.a.get("http://192.168.0.167:8080/api/network-metrics/history",{params:{username:o}});console.log("Nom d'utilisateur actuel :",o),console.log("Donn\xe9es re\xe7ues :",e.data),200===e.status?t(e.data):r("Erreur : ".concat(e.status," ").concat(e.statusText))}catch(a){console.error("Erreur d\xe9taill\xe9e :",a.response||a.message||a),r("Impossible de r\xe9cup\xe9rer l'historique des tests.")}})()},[o]),s.a.createElement("div",{className:"container"},s.a.createElement("h3",null,"Historique des Tests"),a&&s.a.createElement("p",{style:{color:"red"}},a),0===e.length?s.a.createElement("p",null,"Aucun test enregistr\xe9 pour le moment."):s.a.createElement("table",null,s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Date"),s.a.createElement("th",null,"Latence (ms)"),s.a.createElement("th",null,"D\xe9bit (Mbps)"),s.a.createElement("th",null,"Perte de paquets (%)"))),s.a.createElement("tbody",null,e.map((e,t)=>s.a.createElement("tr",{key:t},s.a.createElement("td",null,new Date(e.dateCreation).toLocaleString()),s.a.createElement("td",null,e.latence),s.a.createElement("td",null,e.debit),s.a.createElement("td",null,e.packetlost))))),s.a.createElement("button",{onClick:()=>l.push("/")},"Retour au Test")," ")};class ee extends n.Component{constructor(e){super(e),this.logOut=this.logOut.bind(this),this.state={currentUser:void 0}}componentDidMount(){const e=this.props.user;e&&this.setState({currentUser:e}),z.on("logout",()=>{this.logOut()})}componentWillUnmount(){z.remove("logout")}logOut(){this.props.dispatch(e=>{j.logout(),e({type:"LOGOUT"})}),this.setState({currentUser:void 0})}render(){const{currentUser:e}=this.state;return s.a.createElement(v.a,null,s.a.createElement("div",null,s.a.createElement("nav",{className:"navbar navbar-expand navbar-dark bg-dark"},s.a.createElement(v.b,{to:"/",className:"navbar-brand"},"NetPerfAnalyzer"),s.a.createElement("div",{className:"navbar-nav mr-auto"},e&&s.a.createElement("li",{className:"nav-item"},s.a.createElement(v.b,{to:"/user",className:"nav-link"},"Resource"))),e?s.a.createElement("div",{className:"navbar-nav ml-auto"},s.a.createElement("li",{className:"nav-item"},s.a.createElement(v.b,{to:"/profile",className:"nav-link"},"Profile")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(v.b,{to:"/network-test",className:"nav-link"},"Network Test")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(v.b,{to:"/test-history",className:"nav-link"},"Test History")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(v.b,{to:"/login",className:"nav-link",onClick:this.logOut},"LogOut"))):s.a.createElement("div",{className:"navbar-nav ml-auto"},s.a.createElement("li",{className:"nav-item"},s.a.createElement(v.b,{to:"/login",className:"nav-link"},"Login")),s.a.createElement("li",{className:"nav-item"},s.a.createElement(v.b,{to:"/register",className:"nav-link"},"Sign Up")))),s.a.createElement("div",{className:"container mt-3"},s.a.createElement(f.d,null,s.a.createElement(f.b,{exact:!0,path:["/","/register"],component:W}),s.a.createElement(f.b,{exact:!0,path:"/login",component:D}),s.a.createElement(f.b,{exact:!0,path:"/register",component:W}),s.a.createElement(f.b,{exact:!0,path:"/profile",component:_}),s.a.createElement(f.b,{exact:!0,path:"/user",component:H}),s.a.createElement(f.b,{exact:!0,path:"/network-test",component:Y}),s.a.createElement(f.b,{exact:!0,path:"/test-history",component:Z})))))}}var te=Object(o.b)((function(e){const{user:t}=e.auth;return{user:t}}))(ee);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(o.a,{store:b},s.a.createElement(te,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(e=>{e.unregister()}).catch(e=>{console.error(e.message)})},72:function(e,t,a){e.exports=a(203)},82:function(e,t,a){},84:function(e,t,a){}},[[72,1,2]]]);
//# sourceMappingURL=main.ff4ff817.chunk.js.map